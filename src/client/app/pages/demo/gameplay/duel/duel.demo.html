<!--Hud at the top-->
<app-duel-hud-top
	[boardProgress1]="gameState.getPlayerBoard(gameState.myID).progress"
	[boardProgress2]="gameState.getPlayerBoard(1 - gameState.myID).progress"
	[startTime]="gameState.timeCoordinator.startTime"
	[gameState]="gameState"
	[phase]="gameState.matchState.phase"
></app-duel-hud-top>

<div class="combat-badge-row">
  <app-combat-badge
    class="badge-left"
    [incoming]="myCombatThreat()"
    [currentTimeMs]="nowTick()"
  />
  <div class="badge-spacer"></div>
  <app-combat-badge
    class="badge-right"
    [incoming]="opponentCombatThreat()"
    [currentTimeMs]="nowTick()"
  />
</div>

<!-- This contains everything in the centre, including the two boards, PUP Bars, and central buttons-->
<div class="hud-centre">
  <app-universal-progress-bar
    [percentage]="gameState.getPlayerState(gameState.myID).gameState?.pupProgress ?? 0"
    [isVertical]="true"
  />
  <app-board-model
    #board1
    [model]="gameState.getPlayerBoard(gameState.myID)"
    [isMe]="true"
    [combatThreat]="myCombatThreat()"
    [combatMessages]="myCombatMessages()"
    [currentTimeMs]="nowTick()"
    (sendPacket)="onPacketRequest($event)"
    (selectionChanged)="onBoardSelectionChanged(0)"
  />
  <app-utility-buttons-holder/>
  <app-board-model
    #board2
    [model]="gameState.getPlayerBoard(1 - gameState.myID)"
    [isMe]="false"
    [combatThreat]="opponentCombatThreat()"
    [combatMessages]="opponentCombatMessages()"
    [currentTimeMs]="nowTick()"
    (sendPacket)="onPacketRequest($event)"
    (selectionChanged)="onBoardSelectionChanged(1)"
  />
  <app-universal-progress-bar
    [percentage]="gameState.getPlayerState(1 - gameState.myID).gameState?.pupProgress ?? 0"
    [isVertical]="true"
  />
</div>

<!-- Bottom HUD -->
<div class="hud-bottom">
  <div class="my-pup">
    <app-pup-orb-spinner/>
    <app-pup-slots-holder/>
  </div>
  <app-numeric-buttons-holder (numberClick)="board1.parseNumberKey($event)"/>
  <app-pup-slots-holder/>
</div>